# Ввод информации в базу данных

Запросы на создание объектов в базе данных задаются в виде списка в ключе **base_requests** входного JSON. Каждый запрос является словарём, содержащим ключ type — тип запроса, а также прочую дополнительную информацию о соответствующем объекте.

## **Stop**: описание остановки

Пример:

```json
{
  "type": "Stop",
  "name": "Tolstopaltsevo",
  "latitude": 55.611087,
  "longitude": 37.20829,
  "road_distances": {
    "Marushkino": 3900
  }
}
```

* name — название остановки;
* latitude и longitude — широта и долгота;
* road_distances — расстояния по дорогам от этой остановки до соседних. Все расстояния задаются в метрах и являются целыми положительными числами, каждое из которых не превышает 1000000 и не меньше расстояния по земной поверхности между соответствующими остановками.

По умолчанию предполагается, что расстояние от остановки **A** до остановки **B** равно расстоянию от **B** до **A**, если только расстояние от **A** до **B** не задано явным образом при добавлении остановки **A**.

Каждая из остановок из **road_distances** должна быть определена в некотором запросе **Stop**. В рамках одного запроса **Stop** все остановки различны, и их количество не превосходит 100. Каждая остановка должна быть определена не более чем в одном запросе **Stop**.

## **Bus**: описание автобуса.

Пример:

```json
{
  "type": "Bus",
  "name": "750",
  "stops": [
    "Tolstopaltsevo",
    "Marushkino",
    "Rasskazovka"
  ],
  "is_roundtrip": false
}
```

Запрос на добавление автобуса с названием, заданным в ключе name. Маршрут может задаваться в одном из двух форматов:

1. **"is_roundtrip": false**: автобус следует по списку остановок из stops от первой до последней и обратно.
1. **"is_roundtrip": true**: кольцевой маршрут, у которого первая остановка из списка stops является конечной.

По сути описание автобуса из последнего примера эквивалентно следующему:

```json
{
  "type": "Bus",
  "name": "750",
  "stops": [
    "Tolstopaltsevo",
    "Marushkino",
    "Rasskazovka",
    "Marushkino",
    "Tolstopaltsevo"
  ],
  "is_roundtrip": true
}
```

Разница между двумя форматами лишь в том, что в первом случае последняя остановка считается конечной. С точки зрения механики маршрутизации выделяется лишь первая остановка, так как на ней пассажиры высаживаются из автобуса.

Гарантируется, что каждая из остановок маршрута определена в некотором запросе **Stop**, а сам автобус определён не более чем в одном запросе **Bus**.

## Настройки построения маршрута

Входной JSON содержит ключ **routing_settings**, значением которого является словарь с двумя ключами:

* **"bus_wait_time"** — время ожидания автобуса на остановке (в минутах). Считается, что когда бы человек ни пришёл на остановку и какой бы ни была эта остановка, он будет ждать любой автобус в точности указанное количество минут. Значение — целое число от 1 до 1000;
* **"bus_velocity"** — скорость автобуса (в км/ч). Считайте, что скорость любого автобуса постоянна и в точности равна указанному числу. Время стоянки на остановках не учитывается, время разгона и торможения — тоже. Значение — вещественное число от 1 до 1000.

Пример:

```json
"routing_settings": {
  "bus_wait_time": 6,
  "bus_velocity": 40
}
```

Данная конфигурация задаёт время ожидания равным 6 минутам и скорость автобусов равной 40 километрам в час.

## Настройки отрисовки
Входной JSON содержит ключ **render_settings**, значение которого — словарь, задающий настройки отрисовки.

Ключ                | Описание                           | Формат             
--------------------|------------------------------------|--------------------
width               |Максимальная ширина карты           |Вещественное число
height              |Максимальная высота карты           |Вещественное число
padding	            |Отступ от краёв карты               |Вещественное число
stop_radius         |Радиус круга остановки              |Вещественное число
line_width          |Толщина линий маршрутов             |Вещественное число
stop_label_font_size|Размер шрифта названий остановок    |Целое число
stop_label_offset   |Смещение названий остановок         |Точка (массив из 2 вещественных чисел)
underlayer_color    |Цвет подложки под надписями         |Цвет 
underlayer_width    |Толщина линий подложки под надписями|Вещественное число
color_palette       |Палитра цветов маршрутов            |Массив цветов
bus_label_font_size |Размер шрифта названий автобусов    |Целое число
bus_label_offset    |Смещение названий автобусов         |Точка
layers              |Названия слоёв для вывода карты     |Массив строк

### Описание цвета в JSON
* Строковое значение цвета задаётся непосредственно строкой: "green". В этом случае гарантируется, что эта строка непуста, содержит только строчные латинские буквы и имеет длину не более 20;
* RGB-значение задаётся массивом трёх целых чисел: [0, 255, 0]. В этом случае все числа принадлежат диапазону [0, 255];
* RGBA-значение задаётся массивом из трёх целых чисел и одного вещественного: [0, 255, 0, 0.5]. В этом случае первые три числа принадлежат диапазону [0, 255], а четвёртое — диапазону [0, 1].

### Названия слоёв

* **"bus_lines"** — линии автобусов.
* **"bus_labels"** — названия автобусов.
* **"stop_points"** — круги остановок.
* **"stop_labels"** — названия остановок.

Например 
```
"layers": ["bus_lines", "stop_points", "stop_labels", "bus_labels"]
```